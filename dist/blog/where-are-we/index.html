<!DOCTYPE html>
<html data-n-head="" data-n-head-ssr>
  <head>
    <meta data-n-head="true" charset="utf-8"><meta data-n-head="true" content="width=device-width,initial-scale=1" name="viewport"><meta data-n-head="true" content="Nuxt.js project" name="description" data-hid="description"><title data-n-head="true">nuxt with nunxtent demo</title><link href="/favicon.ico" rel="icon" data-n-head="true" type="image/x-icon"><link href="/_nuxt/manifest.5e4c8470eccc94e32316.js" rel="preload" as="script"><link href="/_nuxt/vendor.65de81d62f64dc616a9e.js" rel="preload" as="script"><link href="/_nuxt/app.6a73f91425d36e810622.js" rel="preload" as="script"><link href="/_nuxt/layouts/default.a54fbd3cf407e646b756.js" rel="preload" as="script"><link href="/_nuxt/pages/blog/_post.13a5cafc60044dda77d7.js" rel="preload" as="script"><link href="/_nuxt/pages/index.33a2fa35f777821aeaa0.js" rel="prefetch"><link href="/_nuxt/pages/blog/index.9387f65c70bae44d8c0a.js" rel="prefetch"><style data-vue-ssr-id="6f792b5c:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;-webkit-transition:width .2s,opacity .4s;transition:width .2s,opacity .4s;opacity:1;background-color:#efc14e;z-index:999999}</style><style data-vue-ssr-id="5c65fd6c:0">html{font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}*,:after,:before,html{-webkit-box-sizing:border-box;box-sizing:border-box}*,:after,:before{margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}</style>
  </head>
  <body data-n-head="">
    <div id="__nuxt" data-server-rendered="true"><div class="nuxt-progress" style="width:0%;height:2px;background-color:#3b8070;opacity:0"></div><div id="__layout"><div><section class="container"><a href="/" class="nuxt-link-active">Home</a> /
    <a href="/blog" class="nuxt-link-active">Blog</a> /
    Conditional code in extended patterns
  <h1 class="post-title">Where the hell are we anyway? Or handling conditional code execution in extended patterns </h1><div><p>Because in freesewing, patterns are implemented as their own classes,
we can make use of a concept called
<em><a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)">class inheritance</a></em>.</p>
<p>It’s the principle that one pattern can <em>extend</em> another pattern. When doing so, it will <em>inherit</em> all its functions and properties, and can choose to override those with its own implementation.</p>
<p>This scenario is common and — once you get the hang of it — rather intuitive.</p>
<p>Patterns contain a bunch of methods, and when a method is not implemented, the method from the (grand)father class/pattern is used.</p>
<p>{% include blogfigure.html img=“minime.jpg” caption=“Class inheritance: Think mini-me” %}</p>
<p>But recently I bumped into a scenario where this mechanism didn’t give me the flexibility I needed.<br>
I was dealing with a use case that is rather common in pattern design: trueing your seams.</p>
<h2>About trueing seams</h2>
<p>To <em>true a seam</em> is a bit of pattern design jargon. It means to match the seamlength of two seams that need to be joined together.</p>
<p>When designing a pattern, we first come up with a shape that should work in theory. But we need to add a reality check to make sure things actually work in practice too.</p>
<p>For example, when designing a trouser pattern, the inseam of the front leg panel and back leg panel need to be matched. But because both panels are shaped differently, there’s no guarantee they will match when the panels are drafted initially.</p>
<p>{% include figure.html url="/img/blog/where-are-we/meme.jpg" description=“Actually, it’s more a matter of figuring out whether one should in the first place” %}</p>
<p>Obviously, we can’t depend on sheer luck, so after the first basic draft of the pattern, we have to check the length of the inseam of front and back panel, and if they don’t match up, adjust them until they do.</p>
<p>This is called <em>trueing your seams</em>. Classic pattern designers do this once when designing the pattern. But because patterns on freesewing are drafted on the fly based on your measurements, this needs to happen on the fly too.</p>
<h2>To true or not to true? A practical example</h2>
<p>So far so good. We need to make sure that things match up by trueing our seams. But things get more complicated when we start to extend our patterns.</p>
<p>I recently came accross this issue while working on some new patterns, and I thought it might be a good idea to illustrate the issue based on a real-word example, and also outline my solution for it.</p>
<p>Here’s the deal: I’m designing a new trouser block for men. It’s called <strong>Trent</strong>. I’m also, in parallel, working on a selvedge jeans block for men called <strong>Seth</strong>.</p>
<p>The selvedge block, <strong>Seth</strong>, is based on — or extends — the regular block, <strong>Trent</strong>. Or in other words, <strong>Trent</strong> is the parent, and <strong>Seth</strong> is the child pattern.</p>
<p>{% include figure.html url="/img/blog/where-are-we/trentSeth.png" description=“Seth extends Trent” %}</p>
<p>Both of these patterns need to have their seams trued. But only if they are the last link in the chain.</p>
<p>What I mean is, if somebody wants to use the basic Trent block, we should true its seams. Likewise, if somebody wants to use the Seth block, we should true its seams too.</p>
<blockquote>
<p>You only want to true your seams at the very end of your drafting process
{:.quote}</p>
</blockquote>
<p>But here’s the catch: Seth depends on Trent, so when we draft Seth, we first draft Trent and use that as a starting point for Seth.</p>
<p>And in this case we <strong>should not</strong>  true the seams of Trent because that is not only pointless and wasteful, it will result in a worse pattern.</p>
<p>Think about it: We draft Trent as best as possible. Then we implement our reality-check to true the seams. In doing so, we deviate ever so slightly from the best theoretical pattern.</p>
<p>But Seth will change the legs parts of the pattern, and so once again we will need to true these seams. So there really is no point in trueing the seems in Trent. It’s work done for nothing, and it’s better to base Seth on the optimal theoretical draft, without our reality check.</p>
<p>It boils down to this: You only want to true your seams at the very end of your drafting process. Not somewhere at the start or in the middle.</p>
<h2>How do you know where you are in the drafting process? Ask <code>Pattern::requested()</code></h2>
<p>When we’re drafting our pattern, we need to know whether this is the end of the drafting process, or are we just preparing the ground work for some other pattern to extend on later.</p>
<p>Since freesewing core v1.2.0, there’s a new method for that: <a href="/docs/core/classdocs/patterns/core/pattern#requested"><code>Pattern::requested()</code></a>.
This method gives you — at all times — the full class name of the pattern that was requested by the user (hence the name). In other words, the pattern at the end of our drafting process.</p>
<blockquote>
<p>Sometimes we want to know inside a class/pattern whether we are the actual pattern the user wants, or merely a stepping stone to get there
{:.quote}</p>
</blockquote>
<p>Knowing what pattern the user requested is one part of the equation. We also need to know where we are currently. Are we in a method implemented by the requested pattern, or in one inherited from a parent patern?</p>
<p>Luckily, PHP has a magic variable called <code>__CLASS__</code> that always gives us the full name of the current class. In other words, the full name of the current pattern.</p>
<p>Now we can compare <code>Pattern::requested()</code> to <code>__CLASS__</code> and if it matches, we know we should true the seams (in our example).</p>
<p>In practice, it looks something like this:</p>
<pre><code class="language-php?start_inline">if( __CLASS__ === $this->requested() ) {
    // True seams here
}
</code></pre>
<h2>Summary</h2>
<p>I hope the practical example of trueing seams was helpful. But this issue is more generic than that.</p>
<p>It boils down to the fact that sometimes we want to know inside a class/pattern whether we are the actual pattern the user wants, or merely a stepping stone to get there.</p>
<p>By comparing <code>$this->requested()</code> to the special <code>__CLASS__</code> variable inside a pattern, we can check at any point in any class/pattern whether this is the case or not.</p>
</div></section></div></div></div><script type="text/javascript">window.__NUXT__={layout:"default",data:[{post:{layout:"blog",title:"Where the hell are we anyway? Or handling conditional code execution in extended patterns",linktitle:"Conditional code in extended patterns",img:"compass.jpg",caption:"Think of Pattern::requested as your compass",author:"Joost De Cock",category:"docs",blurb:"Sometimes we want to know inside a class/pattern whether we are the actual pattern the user wants, or merely a stepping stone to get there.",meta:{index:16,fileName:"2017-10-05-where-are-we.md",section:"/blog",dirName:"/"},date:"2017-10-05",path:"/blog/blog/where-are-we",permalink:"/blog/where-are-we",anchors:[],body:'<p>Because in freesewing, patterns are implemented as their own classes,\nwe can make use of a concept called\n<em><a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)">class inheritance</a></em>.</p>\n<p>It’s the principle that one pattern can <em>extend</em> another pattern. When doing so, it will <em>inherit</em> all its functions and properties, and can choose to override those with its own implementation.</p>\n<p>This scenario is common and — once you get the hang of it — rather intuitive.</p>\n<p>Patterns contain a bunch of methods, and when a method is not implemented, the method from the (grand)father class/pattern is used.</p>\n<p>{% include blogfigure.html img=“minime.jpg” caption=“Class inheritance: Think mini-me” %}</p>\n<p>But recently I bumped into a scenario where this mechanism didn’t give me the flexibility I needed.<br>\nI was dealing with a use case that is rather common in pattern design: trueing your seams.</p>\n<h2>About trueing seams</h2>\n<p>To <em>true a seam</em> is a bit of pattern design jargon. It means to match the seamlength of two seams that need to be joined together.</p>\n<p>When designing a pattern, we first come up with a shape that should work in theory. But we need to add a reality check to make sure things actually work in practice too.</p>\n<p>For example, when designing a trouser pattern, the inseam of the front leg panel and back leg panel need to be matched. But because both panels are shaped differently, there’s no guarantee they will match when the panels are drafted initially.</p>\n<p>{% include figure.html url=&quot;/img/blog/where-are-we/meme.jpg&quot; description=“Actually, it’s more a matter of figuring out whether one should in the first place” %}</p>\n<p>Obviously, we can’t depend on sheer luck, so after the first basic draft of the pattern, we have to check the length of the inseam of front and back panel, and if they don’t match up, adjust them until they do.</p>\n<p>This is called <em>trueing your seams</em>. Classic pattern designers do this once when designing the pattern. But because patterns on freesewing are drafted on the fly based on your measurements, this needs to happen on the fly too.</p>\n<h2>To true or not to true? A practical example</h2>\n<p>So far so good. We need to make sure that things match up by trueing our seams. But things get more complicated when we start to extend our patterns.</p>\n<p>I recently came accross this issue while working on some new patterns, and I thought it might be a good idea to illustrate the issue based on a real-word example, and also outline my solution for it.</p>\n<p>Here’s the deal: I’m designing a new trouser block for men. It’s called <strong>Trent</strong>. I’m also, in parallel, working on a selvedge jeans block for men called <strong>Seth</strong>.</p>\n<p>The selvedge block, <strong>Seth</strong>, is based on — or extends — the regular block, <strong>Trent</strong>. Or in other words, <strong>Trent</strong> is the parent, and <strong>Seth</strong> is the child pattern.</p>\n<p>{% include figure.html url=&quot;/img/blog/where-are-we/trentSeth.png&quot; description=“Seth extends Trent” %}</p>\n<p>Both of these patterns need to have their seams trued. But only if they are the last link in the chain.</p>\n<p>What I mean is, if somebody wants to use the basic Trent block, we should true its seams. Likewise, if somebody wants to use the Seth block, we should true its seams too.</p>\n<blockquote>\n<p>You only want to true your seams at the very end of your drafting process\n{:.quote}</p>\n</blockquote>\n<p>But here’s the catch: Seth depends on Trent, so when we draft Seth, we first draft Trent and use that as a starting point for Seth.</p>\n<p>And in this case we <strong>should not</strong>  true the seams of Trent because that is not only pointless and wasteful, it will result in a worse pattern.</p>\n<p>Think about it: We draft Trent as best as possible. Then we implement our reality-check to true the seams. In doing so, we deviate ever so slightly from the best theoretical pattern.</p>\n<p>But Seth will change the legs parts of the pattern, and so once again we will need to true these seams. So there really is no point in trueing the seems in Trent. It’s work done for nothing, and it’s better to base Seth on the optimal theoretical draft, without our reality check.</p>\n<p>It boils down to this: You only want to true your seams at the very end of your drafting process. Not somewhere at the start or in the middle.</p>\n<h2>How do you know where you are in the drafting process? Ask <code>Pattern::requested()</code></h2>\n<p>When we’re drafting our pattern, we need to know whether this is the end of the drafting process, or are we just preparing the ground work for some other pattern to extend on later.</p>\n<p>Since freesewing core v1.2.0, there’s a new method for that: <a href="/docs/core/classdocs/patterns/core/pattern#requested"><code>Pattern::requested()</code></a>.\nThis method gives you — at all times — the full class name of the pattern that was requested by the user (hence the name). In other words, the pattern at the end of our drafting process.</p>\n<blockquote>\n<p>Sometimes we want to know inside a class/pattern whether we are the actual pattern the user wants, or merely a stepping stone to get there\n{:.quote}</p>\n</blockquote>\n<p>Knowing what pattern the user requested is one part of the equation. We also need to know where we are currently. Are we in a method implemented by the requested pattern, or in one inherited from a parent patern?</p>\n<p>Luckily, PHP has a magic variable called <code>__CLASS__</code> that always gives us the full name of the current class. In other words, the full name of the current pattern.</p>\n<p>Now we can compare <code>Pattern::requested()</code> to <code>__CLASS__</code> and if it matches, we know we should true the seams (in our example).</p>\n<p>In practice, it looks something like this:</p>\n<pre><code class="language-php?start_inline">if( __CLASS__ === $this-&gt;requested() ) {\n    // True seams here\n}\n</code></pre>\n<h2>Summary</h2>\n<p>I hope the practical example of trueing seams was helpful. But this issue is more generic than that.</p>\n<p>It boils down to the fact that sometimes we want to know inside a class/pattern whether we are the actual pattern the user wants, or merely a stepping stone to get there.</p>\n<p>By comparing <code>$this-&gt;requested()</code> to the special <code>__CLASS__</code> variable inside a pattern, we can check at any point in any class/pattern whether this is the case or not.</p>\n'}}],error:null,serverRendered:!0}</script><script defer src="/_nuxt/manifest.5e4c8470eccc94e32316.js"></script><script defer src="/_nuxt/layouts/default.a54fbd3cf407e646b756.js"></script><script defer src="/_nuxt/pages/blog/_post.13a5cafc60044dda77d7.js"></script><script defer src="/_nuxt/vendor.65de81d62f64dc616a9e.js"></script><script defer src="/_nuxt/app.6a73f91425d36e810622.js"></script>
  

